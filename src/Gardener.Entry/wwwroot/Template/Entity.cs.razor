@*@inherits RazorEngine.Templating.TemplateBase<Gardener.CodeGeneration.Dtos.CodeGenNameModel>*@

using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using Furion.DatabaseAccessor;
using Microsoft.EntityFrameworkCore;

namespace @(Model.AppName).@(Model.Module).Server.Model;

/// <summary>
/// @Model.TableDesc
/// </summary>
[Table("@Model.TableName")]
[Comment("@Model.TableDesc")]
public partial class @Model.ClassName : @(Model.Module)BaseModel, IEntityTypeBuilder<@(Model.ClassName)>
{
    public @(Model.ClassName)() { }

    #region Base
    @foreach (var item in Model.CodeGenConfigs)
    {
        @if(item.IsCommon) continue;

        var isRequiredStr = item.IsRequired == true ? "[Required]" : "";
        var dbDataTypeText = !string.IsNullOrEmpty(item.DBDataTypeText) ? "[Column(TypeName = \"" + item.DBDataTypeText + "\")]" : "";

        @:/// <summary>
        @:/// @item.ColumnComment
        @:/// </summary>
        @:[Column("@item.ColumnName")]
        @:[Comment("@item.ColumnComment")]@(isRequiredStr)@(dbDataTypeText)
        @:public @item.NetType @item.NetColumnName { get; set; }
    }
	#endregion

    @*TODO: 这里生成报错*@
    @*@: public void Configure(EntityTypeBuilder<@(Model.ClassName)> entityBuilder, DbContext dbContext, Type dbContextLocator)
    @: {
    @:     entityBuilder.HasKey("@(Model.CodeGen.PrimaryKeyName)");
    @: }*@
}
